var ancestry = JSON.parse(ANCESTRY_FILE);

const average = array => array.reduce((a, b) => a + b) / array.length;

var byCentury = {};
ancestry.forEach(person => {
    byCentury[person.name] = person;
});

function groupBy(items, func) {
    let centuries = [];
    items.map(function (item) {
        let people = [];
        let century = func(item.died);
        let known = centuries.findIndex(c => c.century === century);
        if (known == -1) {
            people.push(item);
            centuries.push({ century: century, people: people });
        } else {
            centuries[known].people.push(item);
        }
    })
    return centuries;
}

const averageExpByCent1 = (array) => {
    return array.map(cent => {
        return (cent.century + 'th: ' +
            average(cent.people.map(person => {
                return (person.died - person.born);
            }))
        )
    })
}
console.log(averageExpByCent1(groupBy(ancestry, a => Math.ceil(a / 100))))